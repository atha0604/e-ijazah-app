<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin Dinas Pendidikan</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card .icon {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .stat-card .label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
        }

        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .card-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header h2 {
            font-size: 18px;
            color: #333;
        }

        .card-body {
            padding: 20px;
        }

        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-bar select, .filter-bar input {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            min-width: 200px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .btn-success {
            background: #4caf50;
            color: white;
        }

        .btn-success:hover {
            background: #45a049;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table thead {
            background: #f8f9fa;
        }

        table th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #666;
            border-bottom: 2px solid #eee;
        }

        table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        table tbody tr:hover {
            background: #f8f9fa;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-success {
            background: #d4edda;
            color: #155724;
        }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }

        .badge-danger {
            background: #f8d7da;
            color: #721c24;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state .icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 14px;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .filter-bar {
                flex-direction: column;
            }

            .filter-bar select, .filter-bar input {
                width: 100%;
            }

            table {
                font-size: 12px;
            }

            table th, table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>üìä Dashboard Admin Dinas Pendidikan</h1>
            <p>Monitoring dan Laporan Data Sekolah</p>
        </div>
    </div>

    <div class="container">
        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="icon">üè´</div>
                <div class="label">Total Sekolah</div>
                <div class="value" id="totalSekolah">-</div>
            </div>
            <div class="stat-card">
                <div class="icon">üë®‚Äçüéì</div>
                <div class="label">Total Siswa</div>
                <div class="value" id="totalSiswa">-</div>
            </div>
            <div class="stat-card">
                <div class="icon">üìù</div>
                <div class="label">Total Nilai</div>
                <div class="value" id="totalNilai">-</div>
            </div>
            <div class="stat-card">
                <div class="icon">üîÑ</div>
                <div class="label">Sync 24 Jam</div>
                <div class="value" id="sync24h">-</div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('sekolah')">üè´ Status Sekolah</button>
            <button class="tab" onclick="switchTab('nilai')">üìù Rekap Nilai</button>
        </div>

        <!-- Tab: Status Sekolah -->
        <div id="tab-sekolah" class="tab-content active">
            <div class="card">
                <div class="card-header">
                    <h2>Status Sinkronisasi Sekolah</h2>
                    <button class="btn btn-primary" onclick="loadSekolahData()">üîÑ Refresh</button>
                </div>
                <div class="card-body">
                    <div class="filter-bar" style="margin-bottom: 20px;">
                        <select id="filterSekolahKecamatan" onchange="loadSekolahData()" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd; min-width: 250px;">
                            <option value="">üîç Pilih Kecamatan untuk melihat data...</option>
                        </select>
                        <select id="filterSekolahStatus" onchange="filterSekolahByStatus()" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd; min-width: 150px; margin-left: 10px;">
                            <option value="">Semua Status</option>
                            <option value="up-to-date">‚úÖ Terbaru</option>
                            <option value="outdated">‚ö†Ô∏è Perlu Update</option>
                            <option value="critical">‚ùå Kritis</option>
                        </select>
                    </div>
                    <div id="sekolahTableContainer">
                        <div class="empty-state">
                            <div class="icon">üè´</div>
                            <p>Silakan pilih kecamatan untuk melihat status sekolah</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Rekap Nilai -->
        <div id="tab-nilai" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>Rekap Nilai Siswa</h2>
                    <button class="btn btn-success" onclick="exportNilai()">üì• Export Excel</button>
                </div>
                <div class="card-body">
                    <div class="filter-bar" style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                        <select id="filterNilaiKurikulum" onchange="updateSekolahOptions(); loadNilaiData()" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd; min-width: 150px;">
                            <option value="">Semua Kurikulum</option>
                            <option value="2013">Kurikulum 2013</option>
                            <option value="merdeka">Kurikulum Merdeka</option>
                        </select>
                        <select id="filterNilaiKecamatan" onchange="updateSekolahOptions(); loadNilaiData()" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd; min-width: 200px;">
                            <option value="">Semua Kecamatan</option>
                        </select>
                        <select id="filterNilaiSekolah" onchange="loadNilaiData()" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd; min-width: 300px;">
                            <option value="">Semua Sekolah</option>
                        </select>
                        <input type="text" id="searchNilai" placeholder="üîç Cari nama siswa..." onkeyup="filterNilaiTable()" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd; min-width: 200px;">
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 14px; color: #666;">Tampilkan:</span>
                            <select id="itemsPerPage" onchange="changeItemsPerPage()" style="padding: 8px; border-radius: 5px; border: 1px solid #ddd;">
                                <option value="20">20</option>
                                <option value="30">30</option>
                                <option value="50">50</option>
                                <option value="70">70</option>
                            </select>
                            <span style="font-size: 14px; color: #666;">data per halaman</span>
                        </div>
                        <div id="paginationInfo" style="font-size: 14px; color: #666;">
                        </div>
                        <div style="display: flex; gap: 5px;">
                            <button id="btnPrevPage" onclick="prevPage()" class="btn btn-secondary" style="padding: 8px 15px; font-size: 14px;" disabled>‚Üê Prev</button>
                            <button id="btnNextPage" onclick="nextPage()" class="btn btn-secondary" style="padding: 8px 15px; font-size: 14px;" disabled>Next ‚Üí</button>
                        </div>
                    </div>
                    <div id="nilaiTableContainer">
                        <div class="empty-state">
                            <div class="icon">üìù</div>
                            <p>Pilih filter untuk melihat rekap nilai siswa</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // API Base URL
        const API_BASE = window.location.origin;

        // Current tab
        let currentTab = 'sekolah';

        // Data storage
        let sekolahData = [];
        let siswaData = [];
        let nilaiData = [];

        // Pagination state
        let currentPage = 1;
        let itemsPerPage = 20;
        let totalSiswa = 0;
        let allSiswaMap = new Map();

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadStats();
            loadKecamatanOptions();
        });

        // Load kecamatan options for filters
        async function loadKecamatanOptions() {
            try {
                const response = await fetch(`${API_BASE}/api/admin/sekolah`);
                const data = await response.json();

                if (data.success && data.data.length > 0) {
                    sekolahData = data.data;

                    // Get unique kecamatan
                    const kecamatanSet = new Set(data.data.map(s => s.kecamatan).filter(k => k));
                    const kecamatanList = Array.from(kecamatanSet).sort();

                    // Populate kecamatan filters
                    const sekolahKecSelect = document.getElementById('filterSekolahKecamatan');
                    const nilaiKecSelect = document.getElementById('filterNilaiKecamatan');

                    kecamatanList.forEach(kec => {
                        const option1 = new Option(kec, kec);
                        const option2 = new Option(kec, kec);
                        sekolahKecSelect.add(option1);
                        nilaiKecSelect.add(option2);
                    });
                }
            } catch (error) {
                console.error('Error loading kecamatan:', error);
            }
        }

        // Switch tabs
        function switchTab(tab) {
            currentTab = tab;

            // Update tab buttons
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(`tab-${tab}`).classList.add('active');

            // Load data if switching to nilai tab
            if (tab === 'nilai') {
                updateSekolahOptions();
            }
        }

        // Load statistics
        async function loadStats() {
            try {
                const response = await fetch(`${API_BASE}/api/admin/stats`);
                const data = await response.json();

                if (data.success) {
                    document.getElementById('totalSekolah').textContent = data.stats.total_sekolah || 0;
                    document.getElementById('totalSiswa').textContent = data.stats.total_siswa || 0;
                    document.getElementById('totalNilai').textContent = data.stats.total_nilai || 0;
                    document.getElementById('sync24h').textContent = data.stats.sync_24h || 0;
                }
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Load sekolah data
        async function loadSekolahData() {
            const container = document.getElementById('sekolahTableContainer');
            const kecamatanFilter = document.getElementById('filterSekolahKecamatan').value;

            // Check if kecamatan selected
            if (!kecamatanFilter) {
                container.innerHTML = '<div class="empty-state"><div class="icon">üè´</div><p>Silakan pilih kecamatan untuk melihat status sekolah</p></div>';
                return;
            }

            container.innerHTML = '<div class="loading">Memuat data...</div>';

            try {
                // Filter data by kecamatan
                const filteredData = sekolahData.filter(s => s.kecamatan === kecamatanFilter);

                if (filteredData.length > 0) {
                    renderSekolahTable(filteredData);
                } else {
                    container.innerHTML = '<div class="empty-state"><div class="icon">üì≠</div><p>Tidak ada sekolah di kecamatan ini</p></div>';
                }
            } catch (error) {
                console.error('Error loading sekolah:', error);
                container.innerHTML = '<div class="empty-state"><div class="icon">‚ùå</div><p>Gagal memuat data</p></div>';
            }
        }

        // Filter sekolah by status
        function filterSekolahByStatus() {
            const statusFilter = document.getElementById('filterSekolahStatus').value;
            const kecamatanFilter = document.getElementById('filterSekolahKecamatan').value;

            if (!kecamatanFilter) return;

            let filteredData = sekolahData.filter(s => s.kecamatan === kecamatanFilter);

            if (statusFilter) {
                filteredData = filteredData.filter(s => s.status === statusFilter);
            }

            renderSekolahTable(filteredData);
        }

        // Render sekolah table
        function renderSekolahTable(data) {
            const html = `
                <table>
                    <thead>
                        <tr>
                            <th>NPSN</th>
                            <th>Nama Sekolah</th>
                            <th>Kecamatan</th>
                            <th>Kabupaten</th>
                            <th>Terakhir Sync</th>
                            <th>Siswa</th>
                            <th>Nilai</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data.map(s => `
                            <tr>
                                <td>${s.npsn}</td>
                                <td><strong>${s.nama_lengkap}</strong></td>
                                <td>${s.kecamatan || '-'}</td>
                                <td>${s.kabupaten || '-'}</td>
                                <td>${s.last_sync ? new Date(s.last_sync).toLocaleString('id-ID') : '-'}</td>
                                <td>${s.total_siswa}</td>
                                <td>${s.total_nilai}</td>
                                <td>
                                    <span class="badge ${getStatusClass(s.status)}">
                                        ${getStatusText(s.status)}
                                    </span>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            document.getElementById('sekolahTableContainer').innerHTML = html;
        }

        // Update sekolah options based on filters
        function updateSekolahOptions() {
            const kurikulum = document.getElementById('filterNilaiKurikulum').value;
            const kecamatan = document.getElementById('filterNilaiKecamatan').value;
            const sekolahSelect = document.getElementById('filterNilaiSekolah');

            console.log('Filter kurikulum:', kurikulum);
            console.log('Filter kecamatan:', kecamatan);
            console.log('Total sekolah:', sekolahData.length);

            // Reset sekolah dropdown
            sekolahSelect.innerHTML = '<option value="">Pilih Sekolah...</option>';

            // Filter sekolah data
            let filteredSekolah = sekolahData;

            if (kurikulum) {
                filteredSekolah = filteredSekolah.filter(s => {
                    const schoolKurikulum = (s.kurikulum || '').toString().toLowerCase();

                    console.log(`Sekolah ${s.nama_lengkap}: kurikulum = "${s.kurikulum}"`);

                    if (kurikulum === '2013') {
                        return schoolKurikulum.includes('2013');
                    } else if (kurikulum === 'merdeka') {
                        return schoolKurikulum.includes('merdeka');
                    }
                    return true;
                });
            }

            if (kecamatan) {
                filteredSekolah = filteredSekolah.filter(s => s.kecamatan === kecamatan);
            }

            console.log('Filtered sekolah:', filteredSekolah.length);

            // Populate sekolah dropdown
            filteredSekolah.forEach(s => {
                const option = new Option(s.nama_lengkap, s.npsn);
                sekolahSelect.add(option);
            });

            // Trigger loadNilaiData to clear table if needed
            loadNilaiData();
        }

        // Load nilai data with filters
        async function loadNilaiData() {
            const container = document.getElementById('nilaiTableContainer');
            const kurikulum = document.getElementById('filterNilaiKurikulum').value;
            const kecamatan = document.getElementById('filterNilaiKecamatan').value;
            const npsn = document.getElementById('filterNilaiSekolah').value;

            // Jangan tampilkan data jika belum pilih sekolah spesifik
            if (!npsn || npsn === '') {
                container.innerHTML = '<div class="empty-state"><div class="icon">üìù</div><p>Silakan pilih sekolah terlebih dahulu untuk melihat rekap nilai</p></div>';
                return;
            }

            container.innerHTML = '<div class="loading">Memuat data...</div>';

            try {
                let url = `${API_BASE}/api/admin/nilai?`;
                if (npsn) url += `npsn=${npsn}&`;
                if (kecamatan) url += `kecamatan=${kecamatan}&`;

                const response = await fetch(url);
                const data = await response.json();

                if (data.success && data.data.length > 0) {
                    nilaiData = data.data;
                    currentPage = 1; // Reset to first page
                    renderNilaiTable(data.data);
                } else {
                    container.innerHTML = '<div class="empty-state"><div class="icon">üìù</div><p>Belum ada data nilai untuk sekolah ini</p></div>';
                }
            } catch (error) {
                console.error('Error loading nilai:', error);
                container.innerHTML = '<div class="empty-state"><div class="icon">‚ùå</div><p>Gagal memuat data</p></div>';
            }
        }

        // Filter nilai table by search
        function filterNilaiTable() {
            const searchTerm = document.getElementById('searchNilai').value.toLowerCase();
            const rows = document.querySelectorAll('#nilaiTableContainer table tbody tr');

            rows.forEach(row => {
                const nama = row.querySelector('td:nth-child(2)')?.textContent.toLowerCase() || '';
                if (nama.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // Render nilai table (rekap format)
        function renderNilaiTable(data) {
            if (!data || data.length === 0) {
                document.getElementById('nilaiTableContainer').innerHTML = '<div class="empty-state"><div class="icon">üìù</div><p>Belum ada data nilai</p></div>';
                document.getElementById('paginationInfo').textContent = '';
                document.getElementById('btnPrevPage').disabled = true;
                document.getElementById('btnNextPage').disabled = true;
                return;
            }

            // Group data by student
            allSiswaMap.clear();
            data.forEach(n => {
                if (!allSiswaMap.has(n.nisn)) {
                    allSiswaMap.set(n.nisn, {
                        nisn: n.nisn,
                        nama: n.nama || '-',
                        sekolah: n.sekolah || '-',
                        mapel: {}
                    });
                }
                const siswa = allSiswaMap.get(n.nisn);
                siswa.mapel[n.mata_pelajaran] = n.nilai || '-';
            });

            totalSiswa = allSiswaMap.size;

            // Get all unique mata pelajaran
            const allMapel = [...new Set(data.map(n => n.mata_pelajaran))].sort();

            // Pagination
            const totalPages = Math.ceil(totalSiswa / itemsPerPage);
            const startIdx = (currentPage - 1) * itemsPerPage;
            const endIdx = Math.min(startIdx + itemsPerPage, totalSiswa);

            const siswaArray = Array.from(allSiswaMap.values());
            const paginatedSiswa = siswaArray.slice(startIdx, endIdx);

            // Update pagination info
            document.getElementById('paginationInfo').textContent = `Menampilkan ${startIdx + 1} - ${endIdx} dari ${totalSiswa} siswa`;
            document.getElementById('btnPrevPage').disabled = currentPage === 1;
            document.getElementById('btnNextPage').disabled = currentPage >= totalPages;

            // Build table
            const html = `
                <table>
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>NISN</th>
                            <th>Nama Siswa</th>
                            <th>Asal Sekolah</th>
                            ${allMapel.map(m => `<th>${m}</th>`).join('')}
                            <th>Rata-rata</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${paginatedSiswa.map((s, idx) => {
                            const nilaiArray = allMapel.map(m => parseFloat(s.mapel[m]) || 0).filter(v => v > 0);
                            const avg = nilaiArray.length > 0
                                ? (nilaiArray.reduce((a, b) => a + b, 0) / nilaiArray.length).toFixed(2)
                                : '-';

                            return `
                                <tr>
                                    <td>${startIdx + idx + 1}</td>
                                    <td>${s.nisn}</td>
                                    <td><strong>${s.nama}</strong></td>
                                    <td>${s.sekolah}</td>
                                    ${allMapel.map(m => `<td>${s.mapel[m] || '-'}</td>`).join('')}
                                    <td><strong>${avg}</strong></td>
                                </tr>
                            `;
                        }).join('')}
                    </tbody>
                </table>
            `;
            document.getElementById('nilaiTableContainer').innerHTML = html;
        }

        // Pagination functions
        function changeItemsPerPage() {
            itemsPerPage = parseInt(document.getElementById('itemsPerPage').value);
            currentPage = 1;
            renderNilaiTable(nilaiData);
        }

        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                renderNilaiTable(nilaiData);
            }
        }

        function nextPage() {
            const totalPages = Math.ceil(totalSiswa / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderNilaiTable(nilaiData);
            }
        }

        // Populate filter dropdowns
        function populateFilters(data, type) {
            // Get unique schools and kecamatan
            const schools = [...new Set(data.map(d => ({ npsn: d.npsn, nama: d.sekolah })))];
            const kecamatans = [...new Set(data.map(d => d.kecamatan).filter(k => k))];

            // Populate school filter
            const schoolSelect = document.getElementById(`filter${type === 'siswa' ? 'Siswa' : 'Nilai'}Sekolah`);
            if (schoolSelect && schools.length > 0) {
                const currentValue = schoolSelect.value;
                schoolSelect.innerHTML = '<option value="">Semua Sekolah</option>' +
                    schools.map(s => `<option value="${s.npsn}">${s.nama}</option>`).join('');
                schoolSelect.value = currentValue;
            }

            // Populate kecamatan filter
            const kecamatanSelect = document.getElementById(`filter${type === 'siswa' ? 'Siswa' : 'Nilai'}Kecamatan`);
            if (kecamatanSelect && kecamatans.length > 0) {
                const currentValue = kecamatanSelect.value;
                kecamatanSelect.innerHTML = '<option value="">Semua Kecamatan</option>' +
                    kecamatans.map(k => `<option value="${k}">${k}</option>`).join('');
                kecamatanSelect.value = currentValue;
            }
        }

        // Helper: Get status class
        function getStatusClass(status) {
            if (status === 'up-to-date') return 'badge-success';
            if (status === 'outdated') return 'badge-warning';
            return 'badge-danger';
        }

        // Helper: Get status text
        function getStatusText(status) {
            if (status === 'up-to-date') return '‚úÖ Up to date';
            if (status === 'outdated') return '‚ö†Ô∏è Outdated';
            return 'üî¥ Critical';
        }

        // Export functions (placeholder)
        function exportSiswa() {
            alert('Export Excel fitur akan segera tersedia');
        }

        function exportNilai() {
            alert('Export Excel fitur akan segera tersedia');
        }

        // Auto-refresh every 5 minutes
        setInterval(() => {
            loadStats();
            if (currentTab === 'sekolah') loadSekolahData();
            else if (currentTab === 'siswa') loadSiswaData();
            else if (currentTab === 'nilai') loadNilaiData();
        }, 5 * 60 * 1000);
    </script>
</body>
</html>
